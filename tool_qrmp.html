<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<link href="js/layer_mobile/need/layer.css" type="text/css" rel="stylesheet">
<script src="js/layer_mobile/layer.js"></script>
<script src="js/underscore-min.js"></script>
<script src="js/jquery.js"></script>
<script src="js/utf.js"></script>
<script src="js/jquery.qrcode.js"></script>
<script src="js/clipboard.min.js"></script>
<link rel="stylesheet" type="text/css" href="css/tool.css" />
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
<title>二维码名片生成工具</title>
<meta name="keywords" content="微信彩色昵称, QQ彩色昵称, 彩色昵称, 微信昵称小尾巴, 微信小尾巴, 二维码合并, 收款码合并, 花样文字, 花样文字工具, 花样文字生成, 火星文生成, 火星文工具 角标, 微信标记, 小电话号码, 小号码, 电话标记, 随机工具, 今天吃什么, 随机抽取工具, 智能机器人, 公众号工具, 关键词回复工具, 关键词回复超链接, 公众号关键词回复, 微信公众号工具, workflow规则, workflow, 小程序, 小号英文">
<meta name="description" content="煎饼铺，一个有趣的公众号">
<script>
$(function() {

    var clipboard = new Clipboard('#copy');

    clipboard.on('success', function(e) {
    	e.clearSelection();
    	tip("拷贝成功");
    });

    clipboard.on('error', function(e) {
    	e.clearSelection();
    	tip("拷贝失败，请手动复制");
    });
    
});
</script>
</head>
<body  oncontextmenu="return true;">
	    <button type="button" style="align:left;background-color:#FFC74A; border-radius:20px;" onclick="back()">返回</button>
	<div id="container">
	<h3>二维码名片生成工具</h3><hr>
	    <p id="info">
	        1、输入你的个人信息，点击生成<br><br>
	        2、长按图片保存到手机或者直接转发
	    </p>
	    <p>输入：</p>
	    <!--
	    姓名：<input type="text" name="name" id="name" maxlength="10" style="width:90%"><br>
	    电话：<input type="text" name="name" id="tel_cell" maxlength="11"style="width:90%"><br>
	    座机：<input type="text" name="name" id="tel_work" maxlength="12"style="width:90%"><br>
	    公司：<input type="text" name="name" id="org" maxlength="30"style="width:90%"><br>
	    部门：<input type="text" name="name" id="role" maxlength="20"style="width:90%"><br>
	    职位：<input type="text" name="name" id="title" maxlength="20"style="width:90%"><br>
	    地址：<input type="text" name="name" id="adr" maxlength="30"style="width:90%"><br>
	    网址：<input type="text" name="name" id="url" maxlength="35"style="width:90%"><br>
	    邮箱：<input type="text" name="name" id="email" maxlength="35"style="width:90%"><br>
	    备注：<input type="text" name="name" id="note" maxlength="35"style="width:90%"><br>
	    -->
	    <table border=0 style="width:90%">
	    <tr><td style="width:20%">姓名：</td><td style="width:80%"><input type="text" name="name" id="name" maxlength="10"></td></tr>
	    <tr><td style="width:20%">电话：</td><td style="width:80%"><input type="text" name="name" id="tel_cell" maxlength="11"></td></tr>
	    <tr><td style="width:20%">公司：</td><td style="width:80%"><input type="text" name="name" id="org" maxlength="10"></td></tr>
	    <tr><td style="width:20%">网址：</td><td style="width:80%"><input type="text" name="name" id="url" maxlength="25"></td></tr>
	    <tr><td style="width:20%">备注：</td><td style="width:80%"><input type="text" name="name" id="note" maxlength="25"></td></tr>
	    </table>

	    <p>输出：</p>
	    <br>
	    <div id="qrcodeCanvas"></div>
	    <img  id='qrcodeImg' />
	    <br><br>
	    <button type="button" style="background-color:#00C74A; border-radius:20px;" id="create">生成</button>
	    <button type="button" style="background-color:#FF4500; border-radius:20px;"  id="clear">清空</button>
	   	
	</div>
</body>
 <script>
 
 	function back() {
 		this.location.href="gj.html";
 	}
 	
 	function replaceAll(srcStr, aStr, bStr) {
		srcStr = srcStr.replace(new RegExp(aStr,'gi'), bStr);
		return srcStr;
	}
	
	var temp = "BEGIN:VCARD"+"\n"+
	"VERSION:3.0"+"\n"+
	"FN:#name"+"\n"+
	"TEL;CELL;VOICE:#tel_cell"+"\n"+
	"TEL;WORK;VOICE:#tel_work"+"\n"+
	"EMAIL;PREF;INTERNET:#email"+"\n"+
	"ROLE:#role"+"\n"+
	"TITLE:#title"+"\n"+
	"ADR;WORK;POSTAL:#adr"+"\n"+
	"URL:#url"+"\n"+
	"NOTE:#note"+"\n"+
	"ORG:#org"+"\n"+
	"END:VCARD";
	
	 temp = "BEGIN:VCARD"+"\n"+
	"VERSION:3.0"+"\n"+
	"FN:#name"+"\n"+
	"TEL;CELL;VOICE:#tel_cell"+"\n"+
	"URL:#url"+"\n"+
	"NOTE:#note"+"\n"+
	"ORG:#org"+"\n"+
	"END:VCARD";
	
	
	/**
	 * 生成二维码
	 */
	function showMyQrCode(str) {
		var vcard_text = str;
		var logo = "./img/jbpLogo.png";
		$("#qrcodeCanvas").html('');
      	$('#qrcodeImg').attr('src', '');
      	$("#qrcodeImg").show();
		generateQrCode("canvas", 250, 250, vcard_text, logo);
	
	}

	
	/** 
	 * 生成二维码
	 * @params renderMethod 加头像必须convas,生成方式 渲染方式有table方式（IE兼容）和canvas方式, 
	 * @params picWidth 二维码宽
	 * @params picHeight 二维码高
	 * @params text 内容
	 * @params logo logo地址
	 */
	function generateQrCode(renderMethod, picWidth, picHeight, text, logo) {
	
		var qrcode = $("#qrcodeCanvas").qrcode({
			render : renderMethod,    //设置渲染方式，有table和canvas，使用canvas方式渲染性能相对来说比较好
			text : text,    //扫描了二维码后的内容显示,在这里也可以直接填一个网址，扫描二维码后
			width : picWidth,               //二维码的宽度
			height : picHeight,              //二维码的高度
			background : "#ffffff",       //二维码的后景色
			foreground : "#000000",        //二维码的前景色
			src: logo            //二维码中间的图片
		}).hide();
		
		setTimeout(function() {
			var canvas = qrcode.find('canvas').get(0); 
			$('#qrcodeImg').attr('src', canvas.toDataURL('image/jpg'));
		},250);
	}
	
	$("#create").on("click",function(e){
		e.preventDefault();
		/*var name = $("#name").val();
		var tel_cell = $("#tel_cell").val();
		var tel_work = $("#tel_work").val();
		var email = $("#email").val();
		var role = $("#role").val();		
		var title = $("#title").val();		
		var adr = $("#adr").val();
		var url = $("#url").val();
		var org = $("#org").val();
		var note = $("#note").val();
		*/
		var name = $("#name").val();
		var tel_cell = $("#tel_cell").val();
		var url = $("#url").val();
		var org = $("#org").val();
		var note = $("#note").val();
		name = deleteAll(name, " ");
		tel_cell = deleteAll(tel_cell, " ");
		if (name == "" || tel_cell == "" ) {
			tip("请至少输入姓名和电话");
			return;	
		}
		
		var str = temp;
		/*
		str =  replaceAll(str, "#name", name);
		str =  replaceAll(str, "#tel_cell", tel_cell);
		str =  replaceAll(str, "#tel_work", tel_work);
		str =  replaceAll(str, "#email", email);
		str =  replaceAll(str, "#role", role);
		str =  replaceAll(str, "#title", title);
		str =  replaceAll(str, "#adr", adr);
		str =  replaceAll(str, "#url", url);
		str =  replaceAll(str, "#org", org);
		str =  replaceAll(str, "#note", note);
		*/
		
		str =  replaceAll(str, "#name", name);
		str =  replaceAll(str, "#tel_cell", tel_cell);
		str =  replaceAll(str, "#url", url);
		str =  replaceAll(str, "#org", org);
		str =  replaceAll(str, "#note", note);
		showMyQrCode(str);
        });
        
        
        $("#clear").on("click",function(e){
       	e.preventDefault();
		$("#name").val('');
		$("#tel_cell").val('');
		$("#url").val('');
		$("#org").val('');
		$("#note").val('');
      	$("#qrcodeCanvas").html('');
      	$('#qrcodeImg').attr('src', '');
      	$("#qrcodeImg").hide();
      	tip("已清空");
        });
        
	function deleteAll(srcStr, aStr) {
		return replaceAll(srcStr, aStr, "");
	}

	function replaceAllChar(srcStr, aStr, bStr) {
		while (srcStr.indexOf(aStr) >= 0) {
			srcStr = srcStr.replace(aStr, bStr);
		}
		
		return srcStr;
	}
	
	
	function tip(msg) {
	          //提示
		  layer.open({
		    content: msg
		    ,skin: 'msg'
		    ,time: 2 //2秒后自动关闭
		  });
	}

</script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?464d7e308b0fdd9fb407887891784488";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</html>