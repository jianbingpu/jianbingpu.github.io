<!DOCTYPE HTML>
<html manifest="manifest">
<head>
<meta charset="UTF-8">
<link href="js/layer_mobile/need/layer.css" type="text/css" rel="stylesheet">
<script src="js/layer_mobile/layer.js"></script>
<script src="js/underscore-min.js"></script>
<script src="js/jquery.js"></script>
<script src="js/json2.js"></script>
<script src="js/clipboard.min.js"></script>
<script src="js/jbp.js"></script>
<link rel="stylesheet" type="text/css" href="css/tool.css" />
<link rel="stylesheet" type="text/css" href="css/lt.css" />
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport" />
<title>智能机器人</title>
<meta name="keywords" content="微信透明, 透明头像, 透明昵称, 透明消息, 圆形头像, 圆形头像生成, 微信二维码名片, 二维码名片, 二维码生成, 微信彩色昵称, QQ彩色昵称, 彩色昵称, 微信昵称小尾巴, 微信小尾巴, 二维码合并, 收款码合并, 花样文字, 花样文字工具, 花样文字生成, 火星文生成, 火星文工具 角标, 微信标记, 小电话号码, 小号码, 电话标记, 随机工具, 今天吃什么, 随机抽取工具, 智能机器人, 公众号工具, 关键词回复工具, 关键词回复超链接, 公众号关键词回复, 微信公众号工具, workflow规则, workflow, 小程序, 小号英文">
<meta name="description" content="煎饼铺，一个有趣的公众号。微信透明, 透明头像, 透明昵称, 透明消息, 圆形头像, 圆形头像生成, 微信二维码名片, 二维码名片, 二维码生成, 微信彩色昵称, QQ彩色昵称, 彩色昵称, 微信昵称小尾巴, 微信小尾巴, 二维码合并, 收款码合并, 花样文字, 花样文字工具, 花样文字生成, 火星文生成, 火星文工具 角标, 微信标记, 小电话号码, 小号码, 电话标记, 随机工具, 今天吃什么, 随机抽取工具, 智能机器人, 公众号工具, 关键词回复工具, 关键词回复超链接, 公众号关键词回复, 微信公众号工具, workflow规则, workflow, 小程序, 小号英文">

<script>

var urlStr = "http://www.tuling123.com/openapi/api?key=";
var keyStr = "36f6d443eebb468194081058a118f14e";
/*
var winHeight = $(window).height(); //获取当前页面高度  
$(window).resize(function() {  
  var thisHeight = $(this).height();  
  if (winHeight - thisHeight > 50) {  
      //当软键盘弹出，在这里面操作  
      //alert('aaa');  
      $('body').css('height', winHeight + 'px');  
  } else {  
      //alert('bbb');  
      //当软键盘收起，在此处操作  
      $('body').css('height', '100%');  
  }  
});*/

function tutorial() {
	var cont = "<b>生活百科</b>：爱迪生的简介<br>";
	cont += "<b>问答百科</b>：周杰伦是谁<br>";
	cont += "<b>中英互译</b>：苹果英语怎么说<br>";
	cont += "<b>数字计算</b>：3乘以3是多少<br>";
	cont += "<b>聊天对话</b>：我生病了有点难受<br>";
	cont += "<b>笑话大全</b>：讲个笑话<br>";
	cont += "<b>故事大全</b>：讲个故事；讲个白雪公主的故事吧<br>";
	cont += "<b>星座运势</b>：天蝎座资料；天蝎座运势；天蝎座性格<br>";
	cont += "<b>脑筋急转弯</b>：脑筋急转弯<br>";
	cont += "<b>歇后语</b>：歇后语<br>";
	cont += "<b>绕口令</b>：绕口令<br>";
	cont += "<b>顺口溜</b>：顺口溜<br>";
	cont += "<b>藏头诗</b>：XXXX藏头诗<br>";
	cont += "<b>新闻资讯</b>：今日新闻<br>";
	cont += "<b>天气查询</b>：北京天气；广东天气<br>";
	cont += "<b>快递查询</b>：查询快递123456789<br>";
	cont += "<b>日期查询</b>：今天农历多少；明年母亲节日期<br>";
	cont += "<b>城市邮编</b>：北京邮编；包头邮编是什么";
	pop("机器人教程", cont);
}


function selectText(element) {
    //var text = document.getElementById(element);
    if (document.body.createTextRange) {
        var range = document.body.createTextRange();
        range.moveToElementText(element);
        range.select();
    } else if (window.getSelection) {
        var selection = window.getSelection();
        var range = document.createRange();
        range.selectNodeContents(element);
        selection.removeAllRanges();
        selection.addRange(range);
        /*if(selection.setBaseAndExtent){
            selection.setBaseAndExtent(text, 0, text, 1);
        }*/
    } else {
        //tip("不支持选中，手动选择");
    }
}
 	
/*接受消息*/
function show(str){
	var html="<div class='send'><div class='time' style='display:none'>12/12 06:06</div><div class='msg'data-clipboard-target='this'><img src='img/jbpLogo.png' />"+
	"<p><i class='msg_input msg_arrow_show'></i>"+str+"</p></div></div>";
	upView(html);
}

/*url消息*/
function toUrl(url){
	var html="<a href='"+url+"' target='_blank'>"+url+"</a>";
	return html;
}

/*发送消息*/
function send(str){
	var html="<div class='show'><div class='time' style='display:none'>12/12 06:06</div><div class='msg'><img src='img/weixinLogo.jpg'/>"+
	"<p style='background: #A3E56F;'><i class='msg_input msg_arrow_send'></i>"+str+"</p></div></div>";
	upView(html);
}

/*更新视图*/
function upView(html){
	$('.message').append(html);
	//$('body').animate({scrollTop:$('.message').outerHeight()-window.innerHeight},200);
	goToBottom();
}

function goToBottom() {
	setTimeout(function(){
	    var speak_height = $('.message').height();
		//window.scrollTo(0,document.body.scrollHeight); 
		window.scrollTo(0, speak_height);
	},200) 
}

function sj(){
	return parseInt(Math.random()*10)
}

$(function(){

    var clipboard = new Clipboard('.msg', {
    	// 通过target指定要复印的节点
        target: function(e) {
                   return e;
              }
    })

    clipboard.on('success', function(e) {
    	e.clearSelection();
    	tip("拷贝成功");
    });

    clipboard.on('error', function(e) {
    	e.clearSelection();
    	tip("拷贝失败，请手动复制");
    });
    
    
	setTimeout(function() {
		show("煎饼铺，一个有趣的公众号");
	},100);
	
	setTimeout(function() {
		show("点击右上角的帮助，可以查看使用说明");
	},300);
	
	/*
	setTimeout(function() {
		show("你可以说，来个笑话。我就会这样回答你");
	},500);
	
	setTimeout(function() {
		sendMsg("笑话");
	},500);
	*/
	
	$('#input').bind('keypress',function(event){  
	    if(event.keyCode == "13"){
	    	$('#send').click();
	    }  
	});
      
	/*$(document).keydown(function(e) {  
		if (e.keyCode == 13) {  
		     $('#send').click();
		}  
	});*/
          
	$('#input').on('focus',function(){
		goToBottom();
		setTimeout(function(){
			var _this = this;
			this.scrollIntoView(true);
			_this.scrollIntoViewIfNeeded();
		},500)
	})
	
	/*$('.footer').on('keyup','input',function(){
		if($(this).val().length>0){
			$("#send").css('background','#2ECC40').attr('disabled',false);
		} else {
			$("#send").css('background','#ddd').attr('disabled',true);
		}
	})*/
	
	$('#send').click(function(){
		/*	if($(this).attr("disabled") == "disabled") {
		 		return;
			}*/
			
			var inputStr = $("#input").val();
			
			if ($.trim(inputStr) == "") {
				tip("请输入内容");
		 		return;	
			}

			send(inputStr);
			$("#input").val("");
			sendMsg(inputStr);
	})
})

function sendMsg(inputStr) {

	var url = urlStr +keyStr+"&info="+encodeURI(inputStr);

 	setTimeout(function(){
	 	$.ajax({
			  url: url,
			  cache: false,
			  type: 'get',
			  dataType: 'JSON',//here
			  beforeSend: function(){/*layer.open({type: 2})*/},
			  complete: function(){/*layer.closeAll();*/},
			  success: function (data) {
			  	//var result =JSON.stringify(data);
			  	//alert(data.code);
			  	if(data.code == 40001) {
			  		tip("参数key错误");
			  		return;
			  	} else if(data.code == 40002) {
			  		tip("请求内容info为空");
			  		return;
			  	} else if(data.code == 40004) {
			  		tip("当天请求次数已使用完");
			  		return;
			  	} else if(data.code == 40007) {
			  		tip("数据格式异常/请按规定的要求进行加密");
			  		return;
			  	} else {

			  		//tip("请求成功");
					if(!!data.text) {
						show(data.text);
					}
					
					if(!!data.url) {
						show(toUrl(data.url));
					}
					
			  		if(!!data.list) {
			  			var lst = data.list;
			  			var result = "";
						$.each(lst, function(idx, obj) {
							result+=(obj.article+"\n"+obj.source+"\n"+toUrl(obj.detailurl));
						});
						show(result);
					}
					
			  	}
			  }
		});
	},sj()*200);
}

show("煎饼铺，一个有趣的公众号");
  (function (doc, win) {
        var docEl = doc.documentElement,
            resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
            recalc = function () {
                var clientWidth = docEl.clientWidth;
                if (!clientWidth) return;
                if(clientWidth>=720){
                    docEl.style.fontSize = '100px';
                }else{
                    docEl.style.fontSize = 100 * (clientWidth / 720) + 'px';
                }
            };

        if (!doc.addEventListener) return;
        win.addEventListener(resizeEvt, recalc, false);
        doc.addEventListener('DOMContentLoaded', recalc, false);
 })(document, window);
</script>
</head>
<body>
<header class="header">
	<div class="back" onclick="back()">返回</div>
	<h5 class="tit">煎饼铺</h5>
	<div class="right" onclick="tutorial()">帮助</div>
</header>
<div class="message" id="message">

</div>

<div class="wenwen-footer">
    <div class="wenwen_text left">
        <div class="write_box">
            <input type="text" class="left" placeholder="请输入内容" id="input">
        </div>
    </div>
    <div class="wenwen_send right">
        <button  class="right" id="send">发送</button>
    </div>

</div>

<!--
<div class="footer">
	<input type="text" style="width:70%;margin-top: 12px " id="input" onfocus="goToBottom()" placeholder="请输入关键字">
	<p id="send" disabled>发送</p>
</div>
-->
</body>
</html>
